$(document).ready(function(){function e(e){return e.normalize("NFD").replace(/[\u0300-\u036f]/g,"")}function s(){const s=document.getElementById("busca"),o=document.getElementById("imoveis-disponiveis");if(!o)return void console.warn("Container #imoveis-disponiveis não encontrado.");let i=document.getElementById("busca-imovel")?.value.toLowerCase()||"";i=e(i.trim());let t=o.querySelectorAll(".imovel"),n=0;t.forEach(s=>{let o=s.innerText.toLowerCase();o=e(o);let t=""===i||o.includes(i);s.style.display=t?"block":"none",t&&i&&n++});let a=document.createElement("p");a.id="feedback-busca",a.style.color=n>0?"#28a745":"#dc3545",a.textContent=i?n>0?`${n} imóvel(is) encontrado(s).`:"Nenhum imóvel encontrado.":"";let l=document.getElementById("feedback-busca");l&&l.remove(),s&&s.appendChild(a)}$(".imoveis-carrossel").slick({slidesToShow:3,slidesToScroll:1,arrows:!0,dots:!1,infinite:!0,responsive:[{breakpoint:1024,settings:{slidesToShow:2,slidesToScroll:1,infinite:!0}},{breakpoint:600,settings:{slidesToShow:1,slidesToScroll:1}}]}),$(".novos-imoveis-carrossel").slick({slidesToShow:3,slidesToScroll:1,arrows:!0,dots:!1,infinite:!0,responsive:[{breakpoint:1024,settings:{slidesToShow:2,slidesToScroll:1,infinite:!0}},{breakpoint:600,settings:{slidesToShow:1,slidesToScroll:1}}]}),$(".imovel-carrossel").slick({slidesToShow:1,slidesToScroll:1,arrows:!0,dots:!1,infinite:!0,autoplay:!0,autoplaySpeed:3e3}),$(".banner-carrossel").slick({slidesToShow:1,slidesToScroll:1,arrows:!1,dots:!1,infinite:!0,autoplay:!0,autoplaySpeed:3e3}),$(".sobre-carrossel").slick({slidesToShow:1,slidesToScroll:1,arrows:!0,dots:!1,infinite:!0,autoplay:!0,autoplaySpeed:3e3}),$(".imoveis-lista.novos").slick({dots:!0,infinite:!0,speed:500,slidesToShow:4,slidesToScroll:1,arrows:!0,responsive:[{breakpoint:1024,settings:{slidesToShow:2}},{breakpoint:600,settings:{slidesToShow:1}}]}),$(".imoveis-lista.destaques").slick({dots:!0,infinite:!0,speed:500,slidesToShow:4,slidesToScroll:1,arrows:!0,responsive:[{breakpoint:1024,settings:{slidesToShow:2}},{breakpoint:600,settings:{slidesToShow:1}}]}),$(".slick-carousel").slick({slidesToShow:3,slidesToScroll:1,infinite:!1,dots:!0,arrows:!0,responsive:[{breakpoint:900,settings:{slidesToShow:2}},{breakpoint:600,settings:{slidesToShow:1}}]}),window.buscarImoveis=s;const o=document.getElementById("busca-imovel");o?o.addEventListener("input",function(e,s){let o;return function(...i){clearTimeout(o),o=setTimeout(()=>e.apply(this,i),s)}}(s,300)):console.warn("Input #busca-imovel não encontrado."),$("#contato-form").on("submit",function(e){e.preventDefault();$("#nome").val(),$("#email").val(),$("#telefone").val(),$("#mensagem").val();const s=$("#feedback-contato");s.text("Mensagem enviada com sucesso! Entraremos em contato em breve."),s.css("color","#28a745"),$("#contato-form")[0].reset(),setTimeout(()=>{s.text("")},5e3)}),async function(){const e=await fetch("/imoveis");let s=await e.json();const o=$("#lista-imoveis");0===s.length?o.html('<div style="text-align:center;color:#888;font-size:1.1em;">Nenhum imóvel encontrado.</div>'):o.html(s.map(e=>`\n                <div class='imovel'>\n                    <img src='${e.imagem?"/uploads/"+e.imagem:"assets/images/exemplo-area-lazer.jpg"}' alt='${e.titulo} #${e.codigo||e.id}'>\n                    <div class='imovel-info'>\n                        <h3>${e.titulo} ${e.codigo?`#${e.codigo}`:""}</h3>\n                        <p class='descricao'>${e.descricao}</p>\n                        <p><b>Preço:</b> R$ ${Number(e.preco).toLocaleString("pt-BR")}</p>\n                        <p><b>Quartos:</b> ${e.quartos} | <b>Tipo:</b> ${e.tipo}</p>\n                        <a href='detalhes.html?id=${e.id}'>Ver Detalhes</a>\n                    </div>\n                </div>\n            `).join(""))}()});const API_URL="http://localhost:8080";document.addEventListener("DOMContentLoaded",()=>{const e=document.getElementById("lista-imoveis");e&&window.location.pathname.includes("imoveis.html")&&fetch(`${API_URL}/imoveis`).then(e=>e.json()).then(s=>{e.innerHTML="",s.forEach(s=>{const o=document.createElement("div");o.className="imovel",o.innerHTML=`\n            <img src="${API_URL}/uploads/${s.imagem}" alt="${s.titulo}">\n            <h3 class="titulo-imovel">${s.titulo}<br><span class="codigo-imovel">#${s.id}</span></h3>\n            <div class="imovel-info">\n                <ul class="detalhes-lista">\n                    <li><span class="icon"><i class="fas fa-home"></i></span> <strong>Tipo:</strong> ${s.tipo??"-"}</li>\n                    <li><span class="icon"><i class="fas fa-bed"></i></span> <strong>Quartos:</strong> ${s.quartos??"-"}</li>\n                    <li><span class="icon"><i class="fas fa-couch"></i></span> <strong>Salas:</strong> ${s.salas??"-"}</li>\n                    <li><span class="icon"><i class="fas fa-ruler-combined"></i></span> <strong>Área:</strong> ${s.area??"-"} m²</li>\n                    <li><span class="icon"><i class="fas fa-bath"></i></span> <strong>Banheiros:</strong> ${s.banheiros??"-"}</li>\n                    <li><span class="icon"><i class="fas fa-map-marker-alt"></i></span> <strong>Localização:</strong> ${s.localizacao??"-"}</li>\n                    <li><span class="icon"><i class="fas fa-dollar-sign"></i></span> <strong>Preço:</strong> R$ ${s.preco??"-"}</li>\n                </ul>\n            </div>\n            <a href="detalhes.html?id=${s.id}" class="btn-detalhes">Ver Detalhes</a>\n          `,e.appendChild(o)})});const s=document.querySelector("#imoveis-novos .imoveis-lista");s&&window.location.pathname.endsWith("index.html")&&fetch(`${API_URL}/imoveis`).then(e=>e.json()).then(e=>{s.innerHTML="",e.forEach(e=>{const o=document.createElement("div");o.className="imovel",o.innerHTML=`\n            <img src="${API_URL}/uploads/${e.imagem}" alt="${e.titulo}">\n            <div class="imovel-info">\n                <h3>${e.titulo}</h3>\n                <a href="detalhes.html?id=${e.id}">Ver Detalhes</a>\n            </div>\n          `,s.appendChild(o)})});const o=document.getElementById("detalhes-grid"),i=document.getElementById("descricao-imovel");if(o){const e=new URLSearchParams(window.location.search).get("id");fetch(`${API_URL}/imoveis/${e}`).then(e=>e.json()).then(e=>{o.innerHTML=`\n          <div class="detalhes-grid-item"><b>Tipo:</b> ${e.tipo??"-"}</div>\n          <div class="detalhes-grid-item"><b>Quartos:</b> ${e.quartos??"-"}</div>\n          <div class="detalhes-grid-item"><b>Salas:</b> ${e.salas??"-"}</div>\n          <div class="detalhes-grid-item"><b>Área:</b> ${e.area??"-"} m²</div>\n          <div class="detalhes-grid-item"><b>Banheiros:</b> ${e.banheiros??"-"}</div>\n          <div class="detalhes-grid-item"><b>Localização:</b> ${e.localizacao??"-"}</div>\n          <div class="detalhes-grid-item"><b>Preço:</b> R$ ${e.preco?Number(e.preco).toLocaleString("pt-BR"):"-"}</div>\n        `,i&&(i.textContent=e.descricao??"-")})}});